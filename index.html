<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry Dash - Technical Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<style>
    #authSection {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
    }
    
    #userInfo {
        display: none;
        background: rgba(255, 255, 255, 0.9);
        padding: 10px;
        border-radius: 10px;
        margin-top: 10px;
        text-align: center;
    }
    
    .logout-btn {
        background: #ff4757;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 8px;
    }
</style>
<body id="gameContainer">
    <div id="ui">
        <div id="score">–û—á–∫–∏: 0</div>
        <div id="highScore">üèÜ –†–µ–∫–æ—Ä–¥: 0</div>
    </div>

    <div id="menu">
        <div id="startScreen">
            <h1>Geometry Dash</h1>
            <h2>Technical Edition</h2>
            <button id="startBtn">‚ñ∂ –ò–≥—Ä–∞—Ç—å</button>
            <div id="controls">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –∏–ª–∏ –ø—Ä–æ–±–µ–ª, —á—Ç–æ–±—ã –ø—Ä—ã–≥–∞—Ç—å</div>
            <div id="authSection">
                <!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç Telegram -->
            </div>
        </div>

        <div id="gameOverScreen" class="hidden">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <p>–í–∞—à —Å—á—ë—Ç: <span id="finalScore">0</span></p>
            <button id="restartBtn">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button id="shareBtn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
    </div>
            <script async src="https://telegram.org/js/telegram-widget.js?22"
                          data-telegram-login="Prak31yu_bot" data-size="large"
                          data-auth-url="https://Raiiiiiil2.github.io/geometry-dash/auth.html"
                          data-request-access="write"></script>
    <canvas id="gameCanvas"></canvas>

    <script src="game.js"></script>
    <script type="text/javascript">
    function onTelegramAuth(user) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        localStorage.setItem('tg_user', JSON.stringify(user));

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        alert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + user.first_name + '! üéÆ\n–¢–≤–æ–π ID: ' + user.id);

        // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
        try {
            Telegram.WebApp.sendData(JSON.stringify({
                action: 'telegram_login',
                user: user
            }));
        } catch (e) {
            console.log('WebApp not available:', e);
        }

        // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
        document.getElementById('authSection').style.display = 'none';
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', function() {
        const savedUser = localStorage.getItem('tg_user');
        if (savedUser) {
            document.getElementById('authSection').style.display = 'none';
        }
    });
</script>
</body>
</html>